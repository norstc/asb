<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/layout :: common_header"></head>

<body>
	<div class="container">
	
		<nav th:replace="fragments/layout::navbar"></nav>
		
		<div class = "jumbotron" th:object="${dealEntity}">
			<h1 th:with="text=${dealEntity.isBuy}?'add a deal':'sell some'" th:text="${text}">add a deal</h1>
			
			<div class="table-responsive" th:if="${dealEntity.isBuy}">
				<h2>balance</h2>
				<table class="table table-striped">
					<thead>
						<tr>
							<th>cash Start</th>
							<th>cash Left</th>
							<th>market Left</th>
							<th>profit</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td th:text = "${owner.cashStart}">[cash start]</td>
							<td th:text="${owner.cashLeft}">[cash left]</td>
							<td th:text="${owner.marketLeft}">[market left]</td>
							<td th:text="${owner.cashLeft} + ${owner.marketLeft} - ${owner.cashStart}">[profit]</td>
						</tr>
					</tbody>
				</table>
			</div>
			<h2>Deal</h2>
			<form  id="add_new_deal" method="post" role="form">
				<div class="form-group" >
					<label for="stockCode">stockCode</label>
					<select th:field="${dealEntity.stockCode}" th:if="${dealEntity.isBuy and !isUpdate} ">
						<option th:each="stock:${stocks}" th:value="${stock.stockCode}"  th:text="${stock.stockCode}" >[option] </option>
					</select>
					<input type="text" class="form-control" id="stockCode" th:field="${dealEntity.stockCode}"  th:if="${isUpdate}"/>
					<input type="text" class="form-control" id="stockCode" th:field="${dealEntity.stockCode}"  th:if="${dealEntity.isBuy} == false" placeholder="请输入股票代码stockCode[6位股票代码]"/>
				</div>
				
				<div class="form-group">
					<input type="hidden" class="form-control" id="buyOrSell" th:field="${dealEntity.isBuy}" th:value="${dealEntity.isBuy}?'true':'false'" />
				</div>
				

				<div class="form-group" >
					<label for="buyTime">buyTime</label>
					<input type="text" class="form-control" id="buyTime" th:field="${dealEntity.buyTime}" placeholder="请输入买入时间buyTime[yyyy/mm/dd]"/>
					<p th:if="${#fields.hasErrors('buyTime')}" th:text="#{date.error}" >buy time error</p>
					
				</div>
				
				<div class="form-group" >
					<label for="buyPrice">buyPrice</label>
					<input type="text" class="form-control" id="buyPrice" th:field="${dealEntity.buyPrice}" placeholder="请输入买入价格buyPrice"/>
					<p th:if="${#fields.hasErrors('buyPrice')}" th:errors="*{buyPrice}">buy price error</p>
				</div>
				
				<div class="form-group" >
					<label for="buyQuantity">buyQuantity</label>
					<input type="text" class="form-control" id="buyQuantity" th:field="${dealEntity.buyQuantity}" placeholder="请输入买入数量buyQuantity"/>
					<p th:if="${#fields.hasErrors('buyQuantity')}" th:errors="*{buyQuantity}">buy quantity error </p>
				</div>
				
				<div class="form-group" th:if="${dealEntity.isBuy } == false">
					<label for="sellTime">sellTime</label>
					<input type="text" class="form-control" id="sellTime" th:field="${dealEntity.sellTime}" placeholder="请输入卖出时间sellTime[yyyy/mm/dd]"/>
					<p th:if="${#fields.hasErrors('sellTime')}" th:text="#{date.error}" >sell time error</p>
					
				</div>
				
				<div class = "form-group" th:if="${dealEntity.isBuy}  == false">
					<label for="sellPrice">sellPrice</label>
					<input type="text" class="form-control" id="sellPrice" th:field="${dealEntity.sellPrice}" placeholder="请输入卖出价格sellPrice"/>
					<p th:if="${#fields.hasErrors('sellPrice')}" th:errors="*{sellPrice}">sell price error</p>
				</div>
				
				<div class="form-group" th:if="${dealEntity.isBuy}  == false">
					<label for="sellQuantity">sellQuantity</label>
					<input type="text" class="form-control" id="sellQuantity" th:field="${dealEntity.sellQuantity}" placeholder="请输入卖出数量sellQuantity"/>
					<p th:if="${#fields.hasErrors('sellQuantity')}" th:errors="*{sellQuantity}">sell quantity error </p>
				</div>
				
				<button type="submit" class="btn btn-default">提交</button>
			</form>
		</div>
		
		<div th:replace="fragments/footer :: footer"></div>
	</div>
</body>
</html>